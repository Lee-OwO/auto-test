const traverse=require("@babel/traverse").default,comment=require("./comment"),getFileAst=require("./utils")["getFileAst"];function traverseAst(e,n,o){traverse(e,{ExportNamedDeclaration(e){if(e.node?.leadingComments?.length){const t=e.node.leadingComments[0].value;e.traverse({FunctionDeclaration(e){n.push({key:e.node.id.name,...comment.parse(t)})}})}},FunctionDeclaration(e){var t;"commonJS"===o&&e.node?.leadingComments?.length&&(t=e.node.leadingComments[0].value,n.push({key:e.node.id.name,...comment.parse(t)}))}})}function getModuleType(e){let t="esModule";return traverse(e,{ExpressionStatement(e){e=e.node.expression.left;e&&"module"===e.object?.name&&"exports"===e.property?.name&&(t="commonJS")}}),t}module.exports=function(e){var t=[],n=getFileAst(e),e=getModuleType(n);return traverseAst(n,t,e),{info:t,type:e}};