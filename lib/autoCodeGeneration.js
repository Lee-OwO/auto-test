const path=require("path"),fs=require("fs-extra"),fileWatcher=require("./watcher"),codeGenerater=require("./codeGenerater"),jestTest=require("./jestTest");function getTargetFilePath(e,t){e=path.basename(e,".js");return path.resolve(t,`./${e}.spec.js`)}module.exports=function(e,r,a=!0){fs.ensureDirSync(path.resolve(r)),fileWatcher({sourceDirPath:path.resolve(e),add(e){var t=getTargetFilePath(e,r);fs.ensureFileSync(t),codeGenerater({sourcePath:e,targetPath:t})},change(e){var t=getTargetFilePath(e,r);codeGenerater({sourcePath:e,targetPath:t}),a&&jestTest(t)},remove(e){e=getTargetFilePath(e,r);fs.removeSync(e)}})};