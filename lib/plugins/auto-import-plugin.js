const nodejsPath=require("path");function getImportCode(e,t){return`import {${e.map(e=>e.key).join(",")}} from '${t}'`}function getRequireVode(e,t){return`const {${e.map(e=>e.key).join(",")}} = require('${t}')`}function getCode(e,t,o){return"commonJS"===o?getRequireVode(e,t):"esModule"===o?getImportCode(e,t):""}module.exports=function(t,a){return{visitor:{Program(e,o){o.isUpdate=!1;const r=t.template.ast(getCode(a.fileInfo,a.path,a.type));e.traverse({ImportDeclaration(e){var t=e.node.source.value;""===nodejsPath.relative(t,a.path)&&(e.replaceWith(r),o.isUpdate=!0,e.stop())},VariableDeclarator(e){var t=e.node.init;t&&"require"===t?.callee?.name&&(t=t?.arguments[0].value,""===nodejsPath.relative(t,a.path)&&(e.parentPath.replaceWith(r),o.isUpdate=!0,e.stop()))}}),o.isUpdate||e.node.body.unshift(r)}}}};